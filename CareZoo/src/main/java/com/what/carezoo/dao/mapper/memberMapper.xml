<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.what.carezoo.dao.MemberDao">
	<insert id="insertCustomer" parameterType="customer">
		<selectKey order="BEFORE" keyProperty="c_num" resultType="int">
			select customer_seq.nextval from dual
		</selectKey>
		insert into customer(c_num,c_name,c_email,c_pass,c_address,c_d_address,c_sex,c_birth,c_contact)
		values(#{c_num},#{c_name},#{c_email},#{c_pass},#{c_address},#{c_d_address},#{c_sex},#{c_birth},#{c_contact})
	</insert>
	
	<update id="updateCustomer" parameterType="customer">
		update customer 
			set c_contact = #{c_contact},
				c_address = #{c_address},
				c_d_address = #{c_d_address},
				c_pass = #{c_pass}
			where c_num = #{c_num}
	</update>
	
	<delete id="deleteCustomer" parameterType="int">
		delete from customer where c_num = #{c_num}
	</delete>
	
	<select id="selectOneByNum" parameterType="int" resultType="customer">
		select * from customer where c_num=#{c_num}
	</select>
	
	<select id="selectOneByEmail" parameterType="string" resultType="customer">
		select * from customer where c_email=#{c_email}
	</select>
	
	<select id="selectAll" resultType="customer">
		select * from customer
	</select>
	
	<select id="userIdCheck" parameterType="string" resultType="Integer">
		select count(*) from customer where c_email =#{c_email}
	</select>
	
	<insert id="insertFile" parameterType="map">
		insert into customer_image (c_num,c_filename,c_write_date )
		values (#{c_num},#{c_filename},sysdate)
	</insert>
	
	<select id="selectFile" parameterType="int" resultType="string">
		select c_filename from customer_image where c_num = #{c_num}
	</select>
	
	<update id="updateFile" parameterType="map">
		update customer_image
		set c_filename = #{c_filename}
			
		where c_num = #{c_num}
	</update>
	<!-- email 찾기 -->
	<select id="findC_email" parameterType="string" resultType="string">
		select c_email from customer where c_name = #{name} and c_contact = #{number}
	</select>
	<select id="findC_emailCount" parameterType="string" resultType="int">
		select count(*) from customer where c_name = #{name} and c_contact = #{number}
	</select>
	<!-- 자바 메일 - 이메일 인증하기 -->
	<insert id="GetKey" parameterType="map">
		update customer set c_email_key = #{c_email_key} where c_email = #{c_email}
	</insert>
	<update id="alter_cKey" parameterType="map">
		update customer set c_email_key = 'Y' where c_email = #{c_email} and  c_email_key = #{c_email_key}
	</update>
</mapper>