<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.what.carezoo.dao.PetHotelDao">

	<insert id="insert" parameterType="PetHotel">
		insert 
		into pethotel (ph_num, ph_p_count, ph_price, ph_name,  ph_address, ph_d_address)
		values (pethotel_seq.nextval, #{ph_p_count},  0 , #{ph_name}, #{ph_address}, #{ph_d_address} )
	</insert>

	<update id="update" parameterType="PetHotel">
		update pethotel
		set ph_name=#{ph_name},
		ph_address = #{ph_address},
		ph_d_address=#{ph_d_address},
		ph_p_count = #{ph_p_count}
		where ph_num = #{ph_num}
	</update>

	<delete id="delete" parameterType="int">
		delete from pethotel 
		where ph_num = #{ph_num}
	</delete>
	
	<select id="selectOne" parameterType="int" resultType="PetHotel">
		select *
		from pethotel
		where ph_num = #{ph_num}
		
		select *
  		  from pethotel ph,pethotel_image f
 	     where ph.num = f.ph_num(+) 
           and ph.num = #{ph_num}
	</select>
	
	<select id="selectAll" resultType="PetHotel">
		select * 
		from pethotel
		order by ph_num
	</select>
	
		<insert id="insertFile" parameterType="map">
		insert into pethotel_image
		  			(ph_img_num,ph_num,ph_fileName )
		values (hotel_img_seq,#{ph_num},#{ph_fileName}) 
	</insert>
	<select id="selectFileName" parameterType="int" resultType="String">
		select * from pethotel_image where PH_NUM = ph_num
	</select>

	<resultMap type="board" id="petHotel">
		<result column="PH_NUM" property="ph_num" />
		<result column="PH_NAME" property="ph_name" />
		<result column="PH_ADDRESS" property="ph_address" />
		<result column="PH_D_ADDRESS" property="ph_d_address" />
		<result column="PH_STAR" property="ph_star" />
		<result column="PH_PRICE" property="ph_price" />
		<result column="PH_P_COUNT" property="ph_p_count" />
		<result column="PH_FILENAME" property="ph_fileName" />
		<result column="PH_LATITUDE" property="ph_latitude" />
		<result column="PH_LONGITUDE" property="ph_longitude" />
	</resultMap>



</mapper>